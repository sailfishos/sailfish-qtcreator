From c9f4bdaa0902c0fdb5ea750d11935e15777a090d Mon Sep 17 00:00:00 2001
From: Alessandro Portale <alessandro.portale@qt.io>
Date: Tue, 12 Feb 2019 19:45:08 +0100
Subject: [PATCH 3/6] Add qmake/Qbs files and files generated by CMake

---
 autogenerated/autogenerated.pri               |  9 ++
 autogenerated/ksyntaxhighlighting_version.h   | 12 +++
 autogenerated/src/lib/AbstractHighlighter     |  1 +
 autogenerated/src/lib/Definition              |  1 +
 autogenerated/src/lib/FoldingRegion           |  1 +
 autogenerated/src/lib/Format                  |  1 +
 autogenerated/src/lib/Repository              |  1 +
 autogenerated/src/lib/State                   |  1 +
 autogenerated/src/lib/SyntaxHighlighter       |  1 +
 autogenerated/src/lib/Theme                   |  1 +
 .../src/lib/ksyntaxhighlighting_logging.cpp   | 11 +++
 .../src/lib/ksyntaxhighlighting_logging.h     | 11 +++
 data/data.pro                                 | 11 +++
 src/lib/ksyntaxhighlighting_export.h          | 34 +++++++
 syntax-highlighting.pro                       | 55 ++++++++++++
 syntax-highlighting.qbs                       | 88 +++++++++++++++++++
 syntax-highlighting_dependencies.pri          |  3 +
 17 files changed, 242 insertions(+)
 create mode 100644 autogenerated/autogenerated.pri
 create mode 100644 autogenerated/ksyntaxhighlighting_version.h
 create mode 100644 autogenerated/src/lib/AbstractHighlighter
 create mode 100644 autogenerated/src/lib/Definition
 create mode 100644 autogenerated/src/lib/FoldingRegion
 create mode 100644 autogenerated/src/lib/Format
 create mode 100644 autogenerated/src/lib/Repository
 create mode 100644 autogenerated/src/lib/State
 create mode 100644 autogenerated/src/lib/SyntaxHighlighter
 create mode 100644 autogenerated/src/lib/Theme
 create mode 100644 autogenerated/src/lib/ksyntaxhighlighting_logging.cpp
 create mode 100644 autogenerated/src/lib/ksyntaxhighlighting_logging.h
 create mode 100644 data/data.pro
 create mode 100644 src/lib/ksyntaxhighlighting_export.h
 create mode 100644 syntax-highlighting.pro
 create mode 100644 syntax-highlighting.qbs
 create mode 100644 syntax-highlighting_dependencies.pri

diff --git a/autogenerated/autogenerated.pri b/autogenerated/autogenerated.pri
new file mode 100644
index 0000000..aee620a
--- /dev/null
+++ b/autogenerated/autogenerated.pri
@@ -0,0 +1,9 @@
+INCLUDEPATH *= $$PWD/src/lib
+INCLUDEPATH *= $$PWD
+
+SOURCES += \
+    $$PWD/src/lib/ksyntaxhighlighting_logging.cpp
+
+HEADERS +=  \
+    $$PWD/ksyntaxhighlighting_version.h \
+    $$PWD/src/lib/ksyntaxhighlighting_logging.h
diff --git a/autogenerated/ksyntaxhighlighting_version.h b/autogenerated/ksyntaxhighlighting_version.h
new file mode 100644
index 0000000..bd31a4d
--- /dev/null
+++ b/autogenerated/ksyntaxhighlighting_version.h
@@ -0,0 +1,12 @@
+// This file was generated by ecm_setup_version(): DO NOT EDIT!
+
+#ifndef SyntaxHighlighting_VERSION_H
+#define SyntaxHighlighting_VERSION_H
+
+#define SyntaxHighlighting_VERSION_STRING "5.52.0"
+#define SyntaxHighlighting_VERSION_MAJOR 5
+#define SyntaxHighlighting_VERSION_MINOR 52
+#define SyntaxHighlighting_VERSION_PATCH 0
+#define SyntaxHighlighting_VERSION ((5<<16)|(52<<8)|(0))
+
+#endif
diff --git a/autogenerated/src/lib/AbstractHighlighter b/autogenerated/src/lib/AbstractHighlighter
new file mode 100644
index 0000000..b787873
--- /dev/null
+++ b/autogenerated/src/lib/AbstractHighlighter
@@ -0,0 +1 @@
+#include "abstracthighlighter.h"
diff --git a/autogenerated/src/lib/Definition b/autogenerated/src/lib/Definition
new file mode 100644
index 0000000..2c3241f
--- /dev/null
+++ b/autogenerated/src/lib/Definition
@@ -0,0 +1 @@
+#include "definition.h"
diff --git a/autogenerated/src/lib/FoldingRegion b/autogenerated/src/lib/FoldingRegion
new file mode 100644
index 0000000..005b829
--- /dev/null
+++ b/autogenerated/src/lib/FoldingRegion
@@ -0,0 +1 @@
+#include "foldingregion.h"
diff --git a/autogenerated/src/lib/Format b/autogenerated/src/lib/Format
new file mode 100644
index 0000000..b0d6a10
--- /dev/null
+++ b/autogenerated/src/lib/Format
@@ -0,0 +1 @@
+#include "format.h"
diff --git a/autogenerated/src/lib/Repository b/autogenerated/src/lib/Repository
new file mode 100644
index 0000000..189dbc2
--- /dev/null
+++ b/autogenerated/src/lib/Repository
@@ -0,0 +1 @@
+#include "repository.h"
diff --git a/autogenerated/src/lib/State b/autogenerated/src/lib/State
new file mode 100644
index 0000000..e148d70
--- /dev/null
+++ b/autogenerated/src/lib/State
@@ -0,0 +1 @@
+#include "state.h"
diff --git a/autogenerated/src/lib/SyntaxHighlighter b/autogenerated/src/lib/SyntaxHighlighter
new file mode 100644
index 0000000..b429824
--- /dev/null
+++ b/autogenerated/src/lib/SyntaxHighlighter
@@ -0,0 +1 @@
+#include "syntaxhighlighter.h"
diff --git a/autogenerated/src/lib/Theme b/autogenerated/src/lib/Theme
new file mode 100644
index 0000000..34a3e98
--- /dev/null
+++ b/autogenerated/src/lib/Theme
@@ -0,0 +1 @@
+#include "theme.h"
diff --git a/autogenerated/src/lib/ksyntaxhighlighting_logging.cpp b/autogenerated/src/lib/ksyntaxhighlighting_logging.cpp
new file mode 100644
index 0000000..4082ac4
--- /dev/null
+++ b/autogenerated/src/lib/ksyntaxhighlighting_logging.cpp
@@ -0,0 +1,11 @@
+// This file was generated by ecm_qt_declare_logging_category(): DO NOT EDIT!
+
+#include "ksyntaxhighlighting_logging.h"
+
+ namespace KSyntaxHighlighting {
+#if QT_VERSION >= QT_VERSION_CHECK(5, 4, 0)
+Q_LOGGING_CATEGORY(Log, "org.kde.ksyntaxhighlighting", QtInfoMsg)
+#else
+Q_LOGGING_CATEGORY(Log, "org.kde.ksyntaxhighlighting")
+#endif
+} 
diff --git a/autogenerated/src/lib/ksyntaxhighlighting_logging.h b/autogenerated/src/lib/ksyntaxhighlighting_logging.h
new file mode 100644
index 0000000..c351b2c
--- /dev/null
+++ b/autogenerated/src/lib/ksyntaxhighlighting_logging.h
@@ -0,0 +1,11 @@
+// This file was generated by ecm_qt_declare_logging_category(): DO NOT EDIT!
+
+#ifndef ECM_QLOGGINGCATEGORY_KSYNTAXHIGHLIGHTING_LOG_KSYNTAXHIGHLIGHTING_LOGGING_H
+#define ECM_QLOGGINGCATEGORY_KSYNTAXHIGHLIGHTING_LOG_KSYNTAXHIGHLIGHTING_LOGGING_H
+
+#include <QLoggingCategory>
+ namespace KSyntaxHighlighting {
+Q_DECLARE_LOGGING_CATEGORY(Log)
+} 
+
+#endif
diff --git a/data/data.pro b/data/data.pro
new file mode 100644
index 0000000..1028ea1
--- /dev/null
+++ b/data/data.pro
@@ -0,0 +1,11 @@
+TEMPLATE = aux
+
+include(../../../../../qtcreator.pri)
+
+STATIC_BASE = $$PWD
+STATIC_OUTPUT_BASE = $$IDE_DATA_PATH/generic-highlighter
+STATIC_INSTALL_BASE = $$INSTALL_DATA_PATH/generic-highlighter
+
+STATIC_FILES += $$files($$PWD/syntax/*, true)
+
+include(../../../../../qtcreatordata.pri)
diff --git a/src/lib/ksyntaxhighlighting_export.h b/src/lib/ksyntaxhighlighting_export.h
new file mode 100644
index 0000000..a39adb5
--- /dev/null
+++ b/src/lib/ksyntaxhighlighting_export.h
@@ -0,0 +1,34 @@
+/****************************************************************************
+**
+** Copyright (C) 2018 The Qt Company Ltd.
+** Contact: https://www.qt.io/licensing/
+**
+** This file is part of Qt Creator.
+**
+** Commercial License Usage
+** Licensees holding valid commercial Qt licenses may use this file in
+** accordance with the commercial license agreement provided with the
+** Software or, alternatively, in accordance with the terms contained in
+** a written agreement between you and The Qt Company. For licensing terms
+** and conditions see https://www.qt.io/terms-conditions. For further
+** information use the contact form at https://www.qt.io/contact-us.
+**
+** GNU General Public License Usage
+** Alternatively, this file may be used under the terms of the GNU
+** General Public License version 3 as published by the Free Software
+** Foundation with exceptions as appearing in the file LICENSE.GPL3-EXCEPT
+** included in the packaging of this file. Please review the following
+** information to ensure the GNU General Public License requirements will
+** be met: https://www.gnu.org/licenses/gpl-3.0.html.
+**
+****************************************************************************/
+
+#pragma once
+
+#include <QtGlobal>
+
+#if defined(KSYNTAXHIGHLIGHTING_LIBRARY)
+#  define KSYNTAXHIGHLIGHTING_EXPORT Q_DECL_EXPORT
+#else
+#  define KSYNTAXHIGHLIGHTING_EXPORT Q_DECL_IMPORT
+#endif
diff --git a/syntax-highlighting.pro b/syntax-highlighting.pro
new file mode 100644
index 0000000..38127e1
--- /dev/null
+++ b/syntax-highlighting.pro
@@ -0,0 +1,55 @@
+include(../../../qtcreatorlibrary.pri)
+include(autogenerated/autogenerated.pri)
+
+QT += network
+
+DEFINES += KSYNTAXHIGHLIGHTING_LIBRARY
+
+RESOURCES += \
+    data/themes/theme-data.qrc
+
+HEADERS += \
+    src/lib/abstracthighlighter.h \
+    src/lib/abstracthighlighter_p.h \
+    src/lib/context_p.h \
+    src/lib/contextswitch_p.h \
+    src/lib/definition.h \
+    src/lib/definition_p.h \
+    src/lib/definitiondownloader.h \
+    src/lib/definitionref_p.h \
+    src/lib/foldingregion.h \
+    src/lib/format.h \
+    src/lib/format_p.h \
+    src/lib/htmlhighlighter.h \
+    src/lib/keywordlist_p.h \
+    src/lib/ksyntaxhighlighting_export.h \
+    src/lib/matchresult_p.h \
+    src/lib/repository.h \
+    src/lib/repository_p.h \
+    src/lib/rule_p.h \
+    src/lib/state.h \
+    src/lib/state_p.h \
+    src/lib/syntaxhighlighter.h \
+    src/lib/textstyledata_p.h \
+    src/lib/theme.h \
+    src/lib/themedata_p.h \
+    src/lib/wildcardmatcher_p.h \
+    src/lib/xml_p.h \
+
+SOURCES += \
+    src/lib/abstracthighlighter.cpp \
+    src/lib/context.cpp \
+    src/lib/contextswitch.cpp \
+    src/lib/definition.cpp \
+    src/lib/definitiondownloader.cpp \
+    src/lib/foldingregion.cpp \
+    src/lib/format.cpp \
+    src/lib/htmlhighlighter.cpp \
+    src/lib/keywordlist.cpp \
+    src/lib/repository.cpp \
+    src/lib/rule.cpp \
+    src/lib/state.cpp \
+    src/lib/syntaxhighlighter.cpp \
+    src/lib/theme.cpp \
+    src/lib/themedata.cpp \
+    src/lib/wildcardmatcher.cpp \
diff --git a/syntax-highlighting.qbs b/syntax-highlighting.qbs
new file mode 100644
index 0000000..248ebe0
--- /dev/null
+++ b/syntax-highlighting.qbs
@@ -0,0 +1,88 @@
+import qbs 1.0
+import qbs.File
+import qbs.FileInfo
+import qbs.Environment
+
+Project {
+    QtcDevHeaders {
+        productName: "syntax-highlighting (3rd party)"
+        baseDir: sourceDirectory + "/src/lib"
+    }
+    QtcDevHeaders {
+        productName: "syntax-highlighting autogenerated (3rd party)"
+        baseDir: sourceDirectory + "/autogenerated/src/lib"
+        Group {
+            prefix: baseDir + '/'
+            files: [
+                "AbstractHighlighter",
+                "Definition",
+                "FoldingRegion",
+                "Format",
+                "Repository",
+                "State",
+                "SyntaxHighlighter",
+                "Theme"
+            ]
+            qbs.install: true
+            qbs.installDir: qtc.ide_include_path + '/' + FileInfo.fileName(product.sourceDirectory)
+            qbs.installSourceBase: baseDir
+        }
+    }
+
+    QtcLibrary {
+        name: "KSyntaxHighlighting"
+
+        cpp.defines: base.concat("KSYNTAXHIGHLIGHTING_LIBRARY")
+        cpp.includePaths: [
+            product.sourceDirectory + "/src/lib/",
+            product.sourceDirectory + "/autogenerated/src/lib/",
+            product.sourceDirectory + "/autogenerated/"
+        ]
+
+        Depends { name: "Qt.gui" }
+        Depends { name: "Qt.network" }
+
+        Group {
+            name: "lib"
+            prefix: "src/lib/"
+            files: [
+                "*.h",
+                "*.cpp"
+            ]
+        }
+
+        Group {
+            name: "KSyntaxHighlighting data"
+            qbs.install: true
+            qbs.installDir: qtc.ide_data_path + "/generic-highlighter/"
+            qbs.installSourceBase: project.ide_source_tree + "/src/libs/3rdparty/syntax-highlighting/data/"
+            prefix: project.ide_source_tree + "/src/libs/3rdparty/syntax-highlighting/data/"
+            files: [
+                "syntax/**/*"
+            ]
+        }
+
+        Group {
+            name: "autogenerated lib"
+            prefix: "autogenerated/src/lib/"
+            files: [
+                "*.h",
+                "*.cpp"
+            ]
+        }
+
+        Group {
+            name: "theme data"
+            prefix: "data/themes/"
+            files: [ "theme-data.qrc" ]
+        }
+
+        Export {
+            Depends { name: "cpp" }
+            cpp.includePaths: [
+                product.sourceDirectory + "/src/lib/",
+                product.sourceDirectory + "/autogenerated/src/lib/",
+            ]
+        }
+    }
+}
diff --git a/syntax-highlighting_dependencies.pri b/syntax-highlighting_dependencies.pri
new file mode 100644
index 0000000..f2fd3e6
--- /dev/null
+++ b/syntax-highlighting_dependencies.pri
@@ -0,0 +1,3 @@
+QTC_LIB_NAME = KSyntaxHighlighting
+INCLUDEPATH *= $$PWD/src/lib
+INCLUDEPATH *= $$PWD/autogenerated/src/lib
-- 
2.20.1.windows.1

